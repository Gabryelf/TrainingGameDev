<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terminal Quest Pro</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div id="app">
        <!-- Top Toolbar -->
        <div class="toolbar top-toolbar">
            <div class="toolbar-left">
                <button class="toolbar-btn" id="menu-btn" title="Меню">
                    <i class="fas fa-bars"></i>
                </button>
                <span class="app-title">Terminal Quest Pro</span>
            </div>
            <div class="toolbar-center">
                <div class="player-info">
                    <span id="player-class-badge" class="class-badge">Новичок</span>
                    <span id="player-level" class="level-badge">Ур. 1</span>
                </div>
            </div>
            <div class="toolbar-right">
                <button class="toolbar-btn" id="save-btn" title="Сохранить">
                    <i class="fas fa-save"></i>
                </button>
                <button class="toolbar-btn" id="settings-btn" title="Настройки">
                    <i class="fas fa-cog"></i>
                </button>
            </div>
        </div>

        <!-- Main Game Area -->
        <div class="game-container">
            <!-- Left Sidebar -->
            <div class="sidebar left-sidebar">
                <div class="player-panel">
                    <div class="avatar-container">
                        <div class="avatar" id="player-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="player-stats">
                            <h3 id="player-name">Игрок</h3>
                            <div class="xp-bar">
                                <div class="xp-fill" id="xp-fill"></div>
                                <span class="xp-text" id="xp-text">0/100 XP</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stat-item">
                            <span class="stat-label">Класс</span>
                            <span class="stat-value" id="stat-class">Хакер</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Очки</span>
                            <span class="stat-value" id="stat-score">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Команды</span>
                            <span class="stat-value" id="stat-commands">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Глава</span>
                            <span class="stat-value" id="stat-chapter">1</span>
                        </div>
                    </div>
                </div>

                <div class="skills-panel">
                    <h4>Способности класса</h4>
                    <div id="class-skills" class="skills-list">
                        <!-- Skills will be populated dynamically -->
                    </div>
                </div>
            </div>

            <!-- Center Game Area -->
            <div class="main-content">
                <div class="terminal-container">
                    <div class="terminal-header">
                        <div class="terminal-title">
                            <i class="fas fa-terminal"></i>
                            <span id="terminal-title">terminal_quest</span>
                        </div>
                        <div class="terminal-controls">
                            <button class="control-btn" id="clear-terminal" title="Очистить">
                                <i class="fas fa-broom"></i>
                            </button>
                            <button class="control-btn" id="export-terminal" title="Экспорт">
                                <i class="fas fa-download"></i>
                            </button>
                        </div>
                    </div>
                    <div class="terminal" id="terminal">
                        <!-- Terminal content will be populated here -->
                    </div>
                </div>

                <div class="story-panel">
                    <div class="story-header">
                        <h3 id="story-title">Глава 1: Пробуждение</h3>
                        <div class="progress-indicator">
                            <span id="story-progress">0%</span>
                        </div>
                    </div>
                    <div class="story-content" id="story-content">
                        <!-- Story content will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Right Sidebar -->
            <div class="sidebar right-sidebar">
                <div class="commands-panel">
                    <div class="panel-header">
                        <h4>Доступные команды</h4>
                        <div class="filter-controls">
                            <button class="filter-btn active" data-filter="all">Все</button>
                            <button class="filter-btn" data-filter="learned">Изученные</button>
                            <button class="filter-btn" data-filter="new">Новые</button>
                        </div>
                    </div>
                    <div class="commands-grid" id="commands-grid">
                        <!-- Command buttons will be populated here -->
                    </div>
                </div>

                <div class="events-panel">
                    <h4>Активные события</h4>
                    <div id="active-events" class="events-list">
                        <!-- Active events will be shown here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Toolbar -->
        <div class="toolbar bottom-toolbar">
            <div class="quick-actions">
                <button class="action-btn" id="quick-save" title="Быстрое сохранение">
                    <i class="fas fa-save"></i>
                </button>
                <button class="action-btn" id="quick-help" title="Помощь">
                    <i class="fas fa-question"></i>
                </button>
                <button class="action-btn" id="toggle-theme" title="Сменить тему">
                    <i class="fas fa-palette"></i>
                </button>
            </div>
            <div class="status-indicators">
                <span class="status-item" id="game-time">Время: 00:00</span>
                <span class="status-item" id="game-date">День: 1</span>
                <span class="status-item" id="auto-save">Автосохранение: Вкл</span>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="character-creation-modal" class="modal">
        <div class="modal-content">
            <h2>Создание персонажа</h2>
            <div class="character-creation">
                <!-- В модальном окне создания персонажа (character-creation-modal) -->
                <div class="modal-actions">
                    <button id="continue-game-btn" class="btn-secondary" style="display: none;">Продолжить игру</button>
                    <button id="start-game-btn" class="btn-primary">Начать новую игру</button>
                </div>
                <div class="form-group">
                    <label for="player-name-input">Имя пользователя:</label>
                    <input type="text" id="player-name-input" placeholder="Введите ваше имя" maxlength="15">
                </div>
                <div class="form-group">
                    <label for="computer-name-input">Имя компьютера:</label>
                    <input type="text" id="computer-name-input" placeholder="hostname" maxlength="10" value="terminal-quest">
                </div>
                <div class="form-group">
                    <label>Выберите начальный класс:</label>
                    <div class="classes-grid" id="classes-selection">
                        <!-- Classes will be populated from config -->
                    </div>
                </div>
                
                <button id="start-game-btn" class="btn-primary">Начать игру</button>
            </div>
        </div>
    </div>

    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <h2>Настройки игры</h2>
            <div class="settings-content">
                <div class="setting-group">
                    <h3>Управление сохранениями</h3>
                    <div class="setting-item">
                        <label>Экспорт сохранения:</label>
                        <button id="export-save-btn" class="btn-secondary">Экспортировать</button>
                    </div>
                    <div class="setting-item">
                        <label>Импорт сохранения:</label>
                        <input type="file" id="import-save-input" accept=".json" style="display: none;">
                        <button id="import-save-btn" class="btn-secondary">Импортировать</button>
                    </div>
                    <div class="setting-item">
                        <label>Сброс прогресса:</label>
                        <button id="reset-game-btn" class="btn-danger">Сбросить игру</button>
                    </div>
                </div>
                
                <div class="setting-group">
                    <h3>Настройки интерфейса</h3>
                    <div class="setting-item">
                        <label>Тема интерфейса:</label>
                        <select id="theme-selector">
                            <option value="dark">Тёмная</option>
                            <option value="light">Светлая</option>
                            <option value="auto">Авто</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label>Автосохранение:</label>
                        <label class="switch">
                            <input type="checkbox" id="auto-save-toggle" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
                
                <div class="setting-group">
                    <h3>Информация о игре</h3>
                    <div class="game-info">
                        <p>Версия: 1.0.0</p>
                        <p>Время игры: <span id="total-play-time">0</span></p>
                        <p>Последнее сохранение: <span id="last-save-time">-</span></p>
                    </div>
                </div>
            </div>
            <div class="modal-actions">
                <button id="close-settings-btn" class="btn-primary">Закрыть</button>
            </div>
        </div>
    </div>

    <!-- Модальное окно помощи -->
<div id="help-modal" class="modal">
    <div class="modal-content">
        <h2>Помощь по игре</h2>
        <div class="help-content">
            <div class="help-section">
                <h3>🎮 Как играть</h3>
                <p><strong>Основной геймплей:</strong></p>
                <ol>
                    <li>Нажимайте на команды в правой панели для их выполнения</li>
                    <li>Изучайте новые команды для прогресса по сюжету</li>
                    <li>Выполняйте цели глав (показаны в нижней панели)</li>
                    <li>Повышайте уровень и открывайте новые возможности</li>
                </ol>
                <p><strong>Первые шаги:</strong></p>
                <ul>
                    <li>Начните с команд <code>ls</code> и <code>pwd</code> чтобы освоиться</li>
                    <li>Используйте <code>mkdir</code> чтобы создать свою первую папку</li>
                    <li>Команда <code>cd</code> поможет перемещаться между папками</li>
                </ul>
                <h3>🎮 Основы игры</h3>
                <p>Terminal Quest Pro - это игра-симулятор для изучения команд терминала через увлекательный сюжет.</p>
                <ul>
                    <li>Используйте команды для взаимодействия с системой</li>
                    <li>Изучайте новые команды для прогресса в игре</li>
                    <li>Выполняйте цели глав для продвижения по сюжету</li>
                    <li>Повышайте уровень и улучшайте класс персонажа</li>
                </ul>
            </div>
            
            <div class="help-section">
                <h3>⌨️ Горячие клавиши</h3>
                <ul>
                    <li><strong>Ctrl + S</strong> - Быстрое сохранение</li>
                    <li><strong>Ctrl + L</strong> - Очистка терминала</li>
                    <li><strong>F1</strong> - Открыть справку</li>
                    <li><strong>Ctrl + R</strong> - Перезагрузка игры (в разработке)</li>
                </ul>
            </div>
            
            <div class="help-section">
                <h3>🎯 Система классов</h3>
                <p>Каждый класс имеет уникальные способности и бонусы:</p>
                <ul>
                    <li><strong>Хакер</strong> - Быстрое обучение, скрытность</li>
                    <li><strong>Системный администратор</strong> - Эффективные команды, ремонт системы</li>
                    <li><strong>Разработчик</strong> - Скрипты, отладка</li>
                </ul>
            </div>
            
            <div class="help-section">
                <h3>💾 Система сохранений</h3>
                <p>Игра автоматически сохраняется каждую минуту. Вы также можете:</p>
                <ul>
                    <li>Использовать кнопку "Сохранить" в тулбаре</li>
                    <li>Нажать Ctrl+S для быстрого сохранения</li>
                    <li>Экспортировать/импортировать сохранения в настройках</li>
                </ul>
            </div>
        </div>
        <div class="modal-actions">
            <button id="close-help-btn" class="btn-primary">Закрыть</button>
        </div>
    </div>
</div>

    <div id="level-up-modal" class="modal">
        <div class="modal-content">
            <h2>Повышение уровня!</h2>
            <div id="level-up-content">
                <!-- Level up content will be populated here -->
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/config/commands.js"></script>
    <script src="js/config/story.js"></script>
    <script src="js/config/classes.js"></script>
    <script src="js/config/events.js"></script>
    
    <script src="js/utils/Helpers.js"></script>
    <script src="js/utils/Storage.js"></script>
    
    <script src="js/game/Player.js"></script>
    <script src="js/game/Terminal.js"></script>
    <script src="js/game/StoryEngine.js"></script>
    <script src="js/game/GameEngine.js"></script>
    
    <script src="js/ui/Modal.js"></script>
    <script src="js/ui/Toolbar.js"></script>
    <script src="js/ui/UIManager.js"></script>
    
    <script src="js/main.js"></script>
</body>
</html>