// База из 60 вопросов по Django
const questionsDatabase = {
    models: {
        1: [
            {
                question: "Что такое модель в Django?",
                answer: "Модель в Django - это класс Python, который наследуется от django.db.models.Model и представляет таблицу в базе данных. Каждый атрибут класса представляет поле в таблице."
            },
            {
                question: "Как создать поле для хранения текста в модели?",
                answer: "Используйте поле CharField для короткого текста или TextField для длинного текста."
            },
            {
                question: "Что делает параметр max_length в CharField?",
                answer: "Параметр max_length определяет максимальную длину текста, который может быть сохранен в этом поле."
            },
            {
                question: "Как создать связь один-ко-многим между моделями?",
                answer: "Используйте поле ForeignKey. Например: author = models.ForeignKey(User, on_delete=models.CASCADE)"
            },
            {
                question: "Что такое primary key в Django модели?",
                answer: "Primary key (первичный ключ) - это уникальный идентификатор для каждой записи в таблице. По умолчанию Django автоматически создает поле 'id' как первичный ключ."
            },
            {
                question: "Как создать поле с датой создания записи?",
                answer: "Используйте поле DateTimeField с auto_now_add=True: created_at = models.DateTimeField(auto_now_add=True)"
            },
            {
                question: "Что делает метод __str__ в модели?",
                answer: "Метод __str__ возвращает строковое представление объекта модели, которое используется в административной панели и при выводе объекта."
            },
            {
                question: "Как выполнить миграции после изменения модели?",
                answer: "Выполните команды: python manage.py makemigrations и затем python manage.py migrate"
            },
            {
                question: "Что такое Meta класс в модели?",
                answer: "Класс Meta внутри модели содержит метаданные, такие как название таблицы в БД, порядок сортировки, verbose_name и другие настройки."
            },
            {
                question: "Как создать поле с выбором из нескольких вариантов?",
                answer: "Используйте поле CharField с параметром choices, который принимает список кортежей."
            }
        ],
        2: [
            {
                question: "Объясните разницу между null=True и blank=True в поле модели.",
                answer: "null=True разрешает NULL значения в базе данных, blank=True разрешает пустое значение в формах. Для строковых полей обычно используют blank=True без null=True."
            },
            {
                question: "Как создать кастомный менеджер моделей и для чего он нужен?",
                answer: "Кастомный менеджер создается путем наследования от models.Manager. Он используется для добавления часто используемых запросов к БД. Например: objects = CustomManager()"
            },
            {
                question: "Объясните, что такое сигналы (signals) в Django и приведите пример использования.",
                answer: "Сигналы позволяют выполнять определенные действия при возникновении событий в модели (сохранение, удаление). Пример: отправка email после создания пользователя с помощью post_save сигнала."
            },
            {
                question: "Как оптимизировать запросы к БД при использовании ForeignKey и ManyToMany отношений?",
                answer: "Использовать select_related() для ForeignKey и prefetch_related() для ManyToMany отношений, чтобы уменьшить количество запросов к БД."
            },
            {
                question: "Что такое abstract base class в моделях и когда его использовать?",
                answer: "Абстрактный базовый класс - это модель, которая не создает таблицу в БД, но предоставляет поля для наследования другими моделями. Используется для DRY принципа."
            },
            {
                question: "Объясните разницу между OneToOneField, ForeignKey и ManyToManyField.",
                answer: "OneToOneField - строгая связь один-к-одному, ForeignKey - связь многие-к-одному, ManyToManyField - связь многие-ко-многим через промежуточную таблицу."
            },
            {
                question: "Как создать составной первичный ключ в Django?",
                answer: "В Django нет прямой поддержки составных первичных ключей. Вместо этого используют UniqueConstraint с несколькими полями или создают суррогатный ключ."
            },
            {
                question: "Что такое migrations в Django и как они работают?",
                answer: "Миграции - это способ управления изменениями схемы БД. Они представляют собой Python файлы, которые описывают изменения моделей и могут применяться или откатываться."
            },
            {
                question: "Как добавить валидацию данных на уровне модели?",
                answer: "Использовать метод clean() в модели или validators в определении поля. Например: models.IntegerField(validators=[MinValueValidator(0)])"
            },
            {
                question: "Объясните концепцию ContentType в Django.",
                answer: "ContentType - это модель, которая отслеживает все установленные модели в проекте. Используется для создания общих отношений (generic relations)."
            }
        ],
        3: [
            {
                question: "Опишите полный процесс создания кастомного поля модели с валидацией и преобразованием данных.",
                answer: "Необходимо создать класс, наследующий от models.Field, переопределить методы get_prep_value, from_db_value, to_python. Также можно добавить кастомные валидаторы и дескрипторы."
            },
            {
                question: "Как реализовать мягкое удаление (soft delete) в Django модели?",
                answer: "Добавить поле is_deleted или deleted_at. Переопределить менеджер моделей для исключения удаленных записей из стандартных запросов. Переопределить метод delete() для установки флага вместо реального удаления."
            },
            {
                question: "Опишите механизм транзакций в Django и как обеспечить атомарность операций.",
                answer: "Использовать декоратор @transaction.atomic или контекстный менеджер with transaction.atomic(). Django использует savepoints для вложенных транзакций и автоматически откатывает при исключениях."
            },
            {
                question: "Как создать полную текстовую индексацию для поиска по нескольким полям модели?",
                answer: "Использовать SearchVector и SearchQuery из django.contrib.postgres для PostgreSQL. Создать GIN индекс на SearchVector поле или использовать сторонние решения типа django-haystack."
            },
            {
                question: "Опишите стратегию оптимизации производительности для сложных запросов с агрегациями и аннотациями.",
                answer: "Использовать select_related/prefetch_related, создавать индексы на часто используемых полях, использовать только() и defer() для выбора полей, кэшировать результаты, использовать подзапросы вместо аннотаций в цикле."
            },
            {
                question: "Как реализовать версионность моделей с сохранением истории изменений?",
                answer: "Использовать библиотеку django-reversion или создать отдельную модель History с ForeignKey к основной, сохраняя JSON с изменениями при каждом save(). Реализовать сигналы post_save для автоматического создания записей истории."
            },
            {
                question: "Опишите процесс создания кастомной системы разрешений (permissions) на уровне модели.",
                answer: "Добавить класс Permissions в Meta модели с кастомными permissions. Создать промежуточную таблицу для хранения разрешений. Реализовать кастомный бэкенд аутентификации или использовать django-guardian."
            },
            {
                question: "Как организовать полиморфные модели в Django (наследование моделей)?",
                answer: "Использовать django-polymorphic или реализовать через OneToOneField с базовой моделью. Для простых случаев использовать multi-table inheritance Django (наследование моделей)."
            },
            {
                question: "Опишите стратегию работы с большими объемами данных (миллионы записей) в Django.",
                answer: "Использовать пагинацию, курсоры для итерации, bulk_create/bulk_update для массовых операций, индексы на все условия WHERE, разделение на логические таблицы (sharding), использование read replicas для чтения."
            },
            {
                question: "Как создать модель с поддержкой локализации (переводов) полей?",
                answer: "Использовать django-modeltranslation или создать отдельную модель Translation с ForeignKey к основной и полями для каждого языка. Альтернативно использовать JSONField для хранения переводов."
            }
        ]
    },
    
    views: {
        1: [
            {
                question: "Что такое view (представление) в Django?",
                answer: "View - это функция или класс Python, который принимает веб-запрос и возвращает веб-ответ. Это контроллер в архитектуре MVC."
            },
            {
                question: "Как создать view-функцию, которая возвращает 'Hello World'?",
                answer: "def hello_world(request): return HttpResponse('Hello World')"
            },
            {
                question: "Что такое HttpResponse в Django?",
                answer: "HttpResponse - это класс для создания HTTP ответов. Он принимает содержимое ответа и возвращает его браузеру."
            },
            {
                question: "Как передать данные из view в шаблон?",
                answer: "Использовать функцию render(): return render(request, 'template.html', {'key': 'value'})"
            },
            {
                question: "Что такое URLconf в Django?",
                answer: "URLconf (конфигурация URL) - это файл, который сопоставляет URL-адреса с view-функциями или классами."
            },
            {
                question: "Как создать view на основе класса (CBV)?",
                answer: "Создать класс, наследующий от View или других классов представлений, и определить метод get() или post()."
            },
            {
                question: "Что такое декоратор @login_required и для чего он используется?",
                answer: "Декоратор @login_required ограничивает доступ к view только для аутентифицированных пользователей. Если пользователь не авторизован, он перенаправляется на страницу входа."
            },
            {
                question: "Как обработать POST запрос в view-функции?",
                answer: "Проверить if request.method == 'POST':, затем получить данные из request.POST и обработать их."
            },
            {
                question: "Что такое reverse() и reverse_lazy() в Django?",
                answer: "Функции для получения URL по имени маршрута. reverse() используется в views, reverse_lazy() - в местах, где код выполняется при импорте (например, в urls.py)."
            },
            {
                question: "Как вернуть JSON ответ из view?",
                answer: "Использовать JsonResponse: return JsonResponse({'key': 'value'})"
            }
        ],
        2: [
            {
                question: "Объясните разницу между Function-Based Views и Class-Based Views.",
                answer: "FBV - простые функции, CBV - классы с наследованием и миксинами. CBV предоставляют структуру для общих задач (ListView, DetailView), но могут быть сложнее для понимания."
            },
            {
                question: "Как реализовать пагинацию в ListView?",
                answer: "Добавить paginate_by в класс view или настроить в get_context_data(). В шаблоне использовать page_obj и is_paginated."
            },
            {
                question: "Что такое миксины (mixins) в CBV и приведите пример использования.",
                answer: "Миксины - это классы, предоставляющие дополнительную функциональность через множественное наследование. Пример: LoginRequiredMixin для ограничения доступа."
            },
            {
                question: "Как создать кастомное представление 404 ошибки?",
                answer: "Создать view-функцию handler404 в urls.py и шаблон 404.html. Установить DEBUG=False и ALLOWED_HOSTS."
            },
            {
                question: "Объясните работу dispatch() метода в CBV.",
                answer: "Метод dispatch() вызывается первым при обработке запроса. Он определяет тип запроса (GET, POST и т.д.) и вызывает соответствующий метод (get(), post())."
            },
            {
                question: "Как передать дополнительные аргументы в CBV через as_view()?",
                answer: "Передать как именованные аргументы: MyView.as_view(extra_context={'title': 'Home'})"
            },
            {
                question: "Что такое FormView и когда его использовать?",
                answer: "FormView - CBV для работы с формами. Используется когда нужно отобразить форму, обработать отправку и показать результат."
            },
            {
                question: "Как реализовать поиск с фильтрацией в ListView?",
                answer: "Переопределить метод get_queryset() для добавления фильтрации на основе параметров GET запроса (request.GET.get('q'))."
            },
            {
                question: "Объясните принцип работы TemplateView и когда его использовать.",
                answer: "TemplateView используется для отображения статических шаблонов. Он автоматически рендерит указанный шаблон и может передавать в него контекст."
            },
            {
                question: "Как обрабатывать AJAX запросы в Django view?",
                answer: "Проверить request.is_ajax(), обработать данные и вернуть JsonResponse. Для современных подходов использовать Django REST Framework."
            }
        ],
        3: [
            {
                question: "Опишите полную архитектуру REST API view с использованием Django REST Framework.",
                answer: "Создать сериализаторы для моделей. Использовать APIView или ViewSet. Настроить permission_classes, authentication_classes. Реализовать методы get, post, put, patch, delete с обработкой различных статус-кодов."
            },
            {
                question: "Как реализовать сложную систему разрешений с кастомными проверками в CBV?",
                answer: "Создать кастомный permission класс с методами has_permission и has_object_permission. Использовать PermissionRequiredMixin или добавить permission_classes в CBV."
            },
            {
                question: "Опишите стратегию кэширования на уровне view для высоконагруженного приложения.",
                answer: "Использовать декоратор cache_page для FBV или CacheMixin для CBV. Настроить vary-on headers. Использовать template fragment caching для частей страницы. Реализовать инвалидацию кэша при изменениях данных."
            },
            {
                question: "Как создать асинхронное view в Django 3.1+ и каковы ограничения?",
                answer: "Использовать async def для view функции. Ограничения: ORM синхронна (нужно использовать sync_to_async), middleware должно поддерживать async, нельзя использовать некоторые синхронные операции."
            },
            {
                question: "Опишите процесс создания middleware для обработки исключений и логирования в view.",
                answer: "Создать класс с методами __init__, __call__, process_exception. В process_exception логировать ошибку, возвращать кастомный ответ или None для стандартной обработки."
            },
            {
                question: "Как реализовать версионность API с поддержкой обратной совместимости?",
                answer: "Использовать пространства имен в URL или заголовки Accept. Создать разные сериализаторы для версий. Использовать миксины для общей функциональности. Плавно устаревать старые endpoint'ы."
            },
            {
                question: "Опишите стратегию тестирования views с покрытием всех edge cases.",
                answer: "Использовать django.test.Client или RequestFactory. Тестировать разные методы запросов, статус коды, перенаправления, контекст шаблона, обработку форм, авторизацию, обработку ошибок. Использовать параметризованные тесты."
            },
            {
                question: "Как создать view с поддержкой Server-Sent Events (SSE) для real-time обновлений?",
                answer: "Использовать StreamingHttpResponse с генератором, отправляющим данные в формате SSE. Поддерживать соединение, отправлять keep-alive сообщения. Использовать async views для эффективности."
            },
            {
                question: "Опишите архитектуру WebSocket views с использованием Django Channels.",
                answer: "Создать consumer класс с методами connect, disconnect, receive. Настроить routing. Использовать группы для broadcast сообщений. Интегрировать с ORM через database_sync_to_async."
            },
            {
                question: "Как реализовать view для обработки загрузки и валидации больших файлов?",
                answer: "Использовать StreamingUpload обработку. Проверять Content-Type и размер файла. Сохранять во временное хранилище. Обрабатывать в фоновой задаче (Celery). Возвращать progress через WebSocket или polling."
            }
        ]
    },
    
    templates: {
        1: [
            {
                question: "Что такое шаблон (template) в Django?",
                answer: "Шаблон - это текстовый файл, содержащий статический HTML и специальный синтаксис Django для динамического контента."
            },
            {
                question: "Как вывести переменную в шаблоне Django?",
                answer: "Использовать двойные фигурные скобки: {{ variable_name }}"
            },
            {
                question: "Как написать комментарий в шаблоне Django?",
                answer: "Использовать {# комментарий #} для однострочных или {% comment %} многострочный комментарий {% endcomment %}"
            },
            {
                question: "Как создать цикл for в шаблоне?",
                answer: "{% for item in items %} {{ item }} {% endfor %}"
            },
            {
                question: "Как написать условный оператор if в шаблоне?",
                answer: "{% if condition %} контент {% elif condition2 %} {% else %} {% endif %}"
            },
            {
                question: "Что такое теги шаблонов (template tags)?",
                answer: "Теги шаблонов - это специальные конструкции, которые выполняют операции: циклы, условия, загрузка других шаблонов и т.д. Синтаксис: {% tag %}"
            },
            {
                question: "Как подключить статические файлы (CSS, JS) в шаблоне?",
                answer: "{% load static %} в начале шаблона, затем <link href=\"{% static 'css/style.css' %}\" rel=\"stylesheet\">"
            },
            {
                question: "Как наследовать шаблоны в Django?",
                answer: "Использовать {% extends 'base.html' %} в начале дочернего шаблона и блоки {% block content %} ... {% endblock %}"
            },
            {
                question: "Как включить один шаблон в другой?",
                answer: "Использовать тег {% include 'partial.html' %}"
            },
            {
                question: "Как отобразить URL по имени маршрута в шаблоне?",
                answer: "Использовать тег {% url 'route_name' %} или с аргументами {% url 'route_name' arg1 arg2 %}"
            }
        ],
        2: [
            {
                question: "Объясните систему фильтров (filters) в шаблонах Django с примерами.",
                answer: "Фильтры преобразуют значения переменных. Синтаксис: {{ variable|filter }}. Примеры: {{ name|upper }}, {{ list|length }}, {{ date|date:'d.m.Y' }}"
            },
            {
                question: "Как создать кастомный тег шаблона и когда это полезно?",
                answer: "Создать файл templatetags в приложении, зарегистрировать библиотеку, создать функцию с декоратором @register.simple_tag. Полезно для сложной логики отображения."
            },
            {
                question: "Что такое контекстные процессоры (context processors) и как их создать?",
                answer: "Контекстные процессоры добавляют данные во все шаблоны. Это функции, принимающие request и возвращающие словарь. Регистрируются в TEMPLATES settings."
            },
            {
                question: "Как организовать структуру шаблонов для большого проекта?",
                answer: "Создать base.html, затем наследовать page.html для типов страниц, использовать include для повторяющихся компонентов. Группировать по приложениям в папках."
            },
            {
                question: "Объясните работу тегов csrf_token и зачем он нужен.",
                answer: "{% csrf_token %} добавляет скрытое поле с токеном для защиты от CSRF атак. Обязателен для POST форм внутри сайта."
            },
            {
                question: "Как создать многоязычный шаблон с поддержкой i18n?",
                answer: "Загрузить i18n: {% load i18n %}. Обернуть текст: {% trans \"Text\" %}. Использовать {% blocktrans %}. Создать файлы перевода с django-admin makemessages."
            },
            {
                question: "Что такое шаблонные фильтры safe и escape?",
                answer: "Фильтр |safe помечает строку как безопасную для HTML, |escape экранирует HTML символы. По умолчанию Django автоматически экранирует переменные."
            },
            {
                question: "Как отобразить форму в шаблоне с кастомной разметкой?",
                answer: "Итерироваться по полям формы: {{ form.field_name.label_tag }} {{ form.field_name }} {{ form.field_name.errors }}. Или рендерить каждое поле отдельно."
            },
            {
                question: "Объясните разницу между render, render_to_string и direct_to_template.",
                answer: "render() - комбинация loader.get_template() и HttpResponse, render_to_string() - только рендеринг в строку, direct_to_template - устаревший generic view."
            },
            {
                question: "Как кэшировать фрагменты шаблона для повышения производительности?",
                answer: "Использовать тег {% cache 300 fragment_name %} ... {% endcache %}. 300 - время в секундах. Можно варьировать по параметрам."
            }
        ],
        3: [
            {
                question: "Опишите процесс создания шаблонного движка с кастомизированным синтаксисом.",
                answer: "Создать класс, наследующий от Template. Реализовать парсинг с использованием регулярных выражений или AST. Переопределить методы render и compile. Зарегистрировать в настройках."
            },
            {
                question: "Как реализовать систему тем (skins) с динамической сменой шаблонов?",
                answer: "Создать middleware, изменяющий TEMPLATE_DIRS на основе поддомена, пользовательских настроек или cookie. Использовать кастомный loader для поиска шаблонов в папках тем."
            },
            {
                question: "Опишите стратегию создания шаблонов для SPA с серверным рендерингом (SSR).",
                answer: "Использовать JSON шаблоны или создать API endpoint для каждого route. Использовать django-rest-framework для данных и отдельные шаблоны для SSR. Интегрировать с React/Vue через django-webpack-loader."
            },
            {
                question: "Как создать систему компонентов шаблонов с переиспользуемыми тегами?",
                answer: "Создать библиотеку тегов с inclusion_tag для каждого компонента. Использовать контекст для передачи параметров. Организовать компоненты по функциональности с папками templates/components."
            },
            {
                question: "Опишите процесс оптимизации шаблонов для максимальной производительности.",
                answer: "Использовать {% with %} для кэширования запросов в переменные. Минимизировать теги include. Использовать select_related в views. Кэшировать фрагменты. Использовать template fragment caching с vary_on."
            },
            {
                question: "Как реализовать A/B тестирование на уровне шаблонов?",
                answer: "Создать middleware для назначения вариантов. Использовать тег {% ab_test 'version_a' 'version_b' %}. Сохранять результаты в Redis. Использовать контекстные процессоры для данных вариантов."
            },
            {
                question: "Опишите архитектуру шаблонной системы для многосайтовости (multisite).",
                answer: "Создать модель Site с настройками. Использовать middleware для определения сайта. Создать шаблонный loader, ищущий шаблоны в папках site_id/. Наследовать от общих базовых шаблонов."
            },
            {
                question: "Как создать шаблоны с поддержкой Accessibility (ARIA, семантическая разметка)?",
                answer: "Использовать кастомные теги для semantic элементов. Создать фильтры для ARIA атрибутов. Добавить валидацию шаблонов на a11y в CI. Создать миксины для распространенных паттернов доступности."
            },
            {
                question: "Опишите систему шаблонных макросов для повторяющихся паттернов разметки.",
                answer: "Создать библиотеку макросов с использованием тегов {% macro %} (если использовать Jinja) или создать inclusion_tag с параметризованным контекстом. Использовать наследование для вариаций макросов."
            },
            {
                question: "Как реализовать реальную динамическую загрузку шаблонов из БД с кэшированием?",
                answer: "Создать модель Template с полями name и content. Реализовать кастомный loader, проверяющий кэш, затем БД, затем файловую систему. Инвалидировать кэш при сохранении модели. Добавить версионность через updated_at."
            }
        ]
    }
};